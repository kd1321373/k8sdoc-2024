# Kubernetes環境のリセットについて

K8sの環境を学ぶ際、変なマニフェストを与えたりして、挙動が怪しくなったりすることがあります。
もちろん該当するリソースを削除することで回復しますが、それが面倒だったり、削除漏れがあったりすることもあります。

ということで、開発環境向けのK8s環境では、**リセット**の方法が用意されています。
かなり気軽に行えるので、必要に応じて適宜使いましょう。

```{warning}
この操作は、全てのリソースを削除します。
中にはストレージリソースのように、なんらかのデータを持っているものもありますので、これらも消えることに十分留意してください。
```

## リセット方法

利用するK8s環境により差違がありますので、該当するものを確認して行ってください。

### Docker Desktop

Docker Desktopの場合、GUIからリセットが可能です。
{menuselection}`設定(歯車) --> Kubernetes --> Reset Kubernetes Cluster`を選択することで、リセットが行えます。

```{figure} dd-k8s-reset.png

Docker DesktopにおけるK8sのリセットボタン
```

```{note}
虫ボタン(トラブルシューティング)にもあります
```

実行すると、全てのリソースが削除されます。

### Minikube

Minikubeの場合、CLIからクラスターの削除が可能です。

```pwsh
PS> minikube delete
```

削除後、再度作成すればまっさらなクラスタが作成されます。

```pwsh
PS> minikube start
```

### kind

kind(K8s in docker)でも同様にクラスターを削除して作り直すことでリセットできます。

```pwsh
PS> kind delete cluster
```

削除後、再度クラスターを作成します。

```pwsh
PS> kind create cluster
```

これでまっさらなクラスターが作成されます。

### その他

その他のK8s開発向けの環境では『クラスターを削除する』→『クラスターを作成し直す』で対応できます。
詳しくは、利用している環境の開発元サイトのドキュメントを確認してください。


